@inject ISettingsService SettingsService

<section class="hero-section">
    <div class="hero-content">
        @if (isLoading)
        {
            <p class="hero-loading"><em>Loading...</em></p>
        }
        else
        {
            <div class="hero-text">
                <h1 class="hero-title">@name</h1>
                <h2 class="hero-subtitle">@title</h2>
                <p class="hero-tagline">@tagline</p>
                <div class="hero-cta">
                    <a href="#contact" class="btn btn-primary btn-lg">@ctaText</a>
                    @if (!string.IsNullOrEmpty(githubUrl))
                    {
                        <a href="@githubUrl" class="btn btn-outline-light btn-lg ms-3" target="_blank">
                            <i class="bi bi-github"></i> GitHub
                        </a>
                    }
                </div>
            </div>
        }
    </div>
</section>

@code {
    private bool isLoading = true;
    private string name = string.Empty;
    private string title = string.Empty;
    private string tagline = string.Empty;
    private string ctaText = "Get In Touch";
    private string githubUrl = string.Empty;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            var settings = await SettingsService.GetSettingsByCategoryAsync("Hero");

            name = settings.FirstOrDefault(s => s.Key == "Name")?.Value ?? "Austin Little";
            title = settings.FirstOrDefault(s => s.Key == "Title")?.Value ?? "Software Engineer";
            tagline = settings.FirstOrDefault(s => s.Key == "Tagline")?.Value ?? "Building innovative solutions with .NET and modern web technologies";
            ctaText = settings.FirstOrDefault(s => s.Key == "CTAText")?.Value ?? "Get In Touch";
            githubUrl = settings.FirstOrDefault(s => s.Key == "GitHubUrl")?.Value ?? string.Empty;
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading hero settings: {ex.Message}");
            // Use defaults if loading fails
            name = "Austin Little";
            title = "Software Engineer";
            tagline = "Building innovative solutions with .NET and modern web technologies";
        }
        finally
        {
            isLoading = false;
        }
    }
}
