@inject ThemeService ThemeService
@implements IDisposable

<nav class="navbar">
    <div class="navbar-container">
        <a href="#" class="navbar-brand">Austin Little</a>

        <button class="navbar-toggle" @onclick="ToggleMobileMenu">
            <i class="bi @(mobileMenuOpen ? "bi-x" : "bi-list")"></i>
        </button>

        <div class="navbar-menu @(mobileMenuOpen ? "active" : "")">
            <a href="#about" class="navbar-link" @onclick="CloseMobileMenu">About</a>
            <a href="#skills" class="navbar-link" @onclick="CloseMobileMenu">Skills</a>
            <a href="#projects" class="navbar-link" @onclick="CloseMobileMenu">Projects</a>
            <a href="#experience" class="navbar-link" @onclick="CloseMobileMenu">Experience</a>

            <button class="theme-toggle" @onclick="ToggleTheme" title="Toggle theme">
                <i class="bi @(ThemeService.CurrentTheme == "light" ? "bi-moon-stars-fill" : "bi-sun-fill")"></i>
            </button>
        </div>
    </div>
</nav>

@code {
    private bool mobileMenuOpen = false;

    protected override async Task OnInitializedAsync()
    {
        await ThemeService.InitializeAsync();
        ThemeService.OnThemeChanged += StateHasChanged;
    }

    private void ToggleMobileMenu()
    {
        mobileMenuOpen = !mobileMenuOpen;
    }

    private void CloseMobileMenu()
    {
        mobileMenuOpen = false;
    }

    private async Task ToggleTheme()
    {
        await ThemeService.ToggleThemeAsync();
    }

    public void Dispose()
    {
        ThemeService.OnThemeChanged -= StateHasChanged;
    }
}
